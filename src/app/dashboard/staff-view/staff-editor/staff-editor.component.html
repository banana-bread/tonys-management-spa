<div class="app-editor view">
    <form #editorForm="ngForm" (ngSubmit)="onSave()">
        <mat-toolbar class="app-editor-toolbar" fxLayout="row" fxLayoutGap="10px">
            <button mat-icon-button 
                *ngIf="original"
                type="button"
                class="close-button" 
                aria-label="Close edit employee button."
                (click)="onClose()">
                <mat-icon>close</mat-icon>
            </button>
            <span class="app-editor-title" *ngIf="!loading">{{ !!original ? 'Edit' : 'New' }} Staff</span>
            <span fxFlex></span>
            <button type="button" 
                *ngIf="original"
                class="delete-button" 
                mat-raised-button 
                [disabled]="saving || loading || !original"
                (click)="onDelete()"> 
                Delete
            </button>
            <button type="submit" mat-raised-button color="primary" [disabled]="saving || loading">
                {{ !!original ? 'Save' : 'Submit' }}
            </button>
        </mat-toolbar>
        <mat-progress-bar class="app-loading-bar" *ngIf="saving" mode="indeterminate"></mat-progress-bar>

        <div class="app-view-padding"
            fxLayout="column"
            fxLayoutAlign=" center"
            fxLayoutGap="40px"
            *ngIf="!loading">

            <app-base-schedule-editor
                [schedule]="employee.base_schedule"
                [scheduleParent]="employee.company.base_schedule"
                (change)="onBaseScheduleChanged()">

            </app-base-schedule-editor>

            <mat-card class="app-editor-card">
                <mat-card-title class="app-editor-card-title">Profile</mat-card-title>
                <div fxLayout="column">
                    <mat-form-field fxFlex hideRequiredMarker>
                        <mat-label>Name</mat-label>
                        <input type="text"
                            [(ngModel)]="employee.name"
                            name="employeeName"
                            #employeeName="ngModel"
                            required
                            [disabled]="saving"
                            matInput>
                    <mat-error *ngIf="employeeName.hasError('required')">Name is required</mat-error>
                    </mat-form-field>

                    <mat-form-field fxFlex hideRequiredMarker>
                        <mat-label>Phone</mat-label>
                        <input type="phone"
                            [(ngModel)]="employee.phone"
                            name="employeePhone"
                            #employeePhone="ngModel"
                            required
                            [disabled]="saving"
                            matInput>
                        <mat-error *ngIf="employeePhone.hasError('required')">Phone is required</mat-error>
                    </mat-form-field>
                </div>
            </mat-card>

            <mat-card class="app-editor-card">
                <mat-card-title class="app-editor-card-title">Account</mat-card-title>
                <div fxLayout="column" fxLayoutGap="16px">
                    <div fxFlex fxLayout="row">
                        <mat-slide-toggle></mat-slide-toggle>

                    </div>
                </div>
            </mat-card>
        </div>
    </form>
    <mat-progress-spinner class="app-page-loading" mode="indeterminate" *ngIf="loading"></mat-progress-spinner>
</div>
